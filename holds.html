<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>HCMS | 보류 리스트</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="app.js" type="module"></script>

  <style>
    body { font-family: Arial; padding: 20px; font-size: 17px; }
    h1 { margin-bottom: 20px; }

    table {
      width: 100%;
      border-collapse: collapse;
    }

    th, td {
      border: 1px solid #ccc;
      padding: 14px;
      text-align: center;
    }

    tr { height: 50px; }
    th { background: #f4f4f4; }
  </style>
</head>
<body>

<h1>보류 리스트</h1>

<table>
  <thead>
    <tr>
      <th>크레인 번호</th>
      <th>지역</th>
      <th>보류 사유</th>
      <th>보류일</th>
    </tr>
  </thead>
  <tbody id="holdList"></tbody>
</table>

<script type="module">
  document.addEventListener("DOMContentLoaded", async () => {
    const { data, error } = await sb
      .from("cranes")
      .select("*")
      .eq("inspection_status", "보류");

    if (error) return alert(error.message);

    const tbody = document.getElementById("holdList");
    data.forEach(c => {
      const tr = document.createElement("tr");
      tr.innerHTML = `
        <td>${c.crane_no}</td>
        <td>${c.area || ""}</td>
        <td>${c.hold_reason || ""}</td>
        <td>${c.updated_at?.slice(0,10) || ""}</td>
      `;
      tbody.appendChild(tr);
    });
  });
</script>

</body>
</html>
